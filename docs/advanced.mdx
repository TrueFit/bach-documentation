---
name: Advanced
route: /advanced
---

# Advanced

## Custom enhancers

We would love to see members of the community add their own enhancers. If you come up with one that is applicable to the larger community (for example, wrapping a different React-CSS framework), please contact us so that we can add it to the list above.

To create your own enhancers, you need to pass a function to the compose method that returns a js object with the required properties. This is typically done as the result of a curried function, you can check the source code of existing enhancers for reference.

### Function Signature

The function will be invoked with a js object. This object contains the following properties that we found to be helpful or required across multiple enhancers. You are not required to use anything from this object - not everything applies to every instance.

| Property            | Type     | Description                                                                                                                                                                                                                       |
| ------------------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| generateNewVariable | function | a utility function that will generate a random 16 character string that can be used as a variable name in your initialize code. These strings are guaranteed to be unique inside the scope of the single HOC component generated. |

### Return Object

| Property     | Type      | Description                                                                                                                                                                        |
| ------------ | --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| dependencies | js object | a map of the dependencies for your enhancer. These will be available to your initialize code by the keys specified. The compose method reduces all keys to a single unique key set |
| initialize   | string    | the code that will be added in line in order to the generated HOC                                                                                                                  |
| props        | any       | the properties that the code creates that need to be added to the overall property object that will be passed to the wrapped component                                             |

### Initialize

As mentioned above, we wanted to keep the levels of HOC to a max of one. To accomplish this goal, rather than have a series of functions, we need each enhancer to actually expose the code it requires to work. The compose method combines all of these string of code into a single HOC at runtime. Under the covers, compose uses [`new Function()`](https://remarkablemark.org/blog/2018/05/15/javascript-eval-vs-function/) to accomplish this transformation.

Thus there are a couple of important ideas to keep in mind when writing your initialize implementation code:

- Your code will be running in its own scope, not the scope of the calling function. This means that what you have access to are your dependencies. This leads to code like React.useState rather than just useState.
- Since the code is evaluated at runtime, you don't have access to babel or other similar utilities. You should write your javascript for the widest use.
- You should not do anything that takes up too much processing time to initialize.
- You should expect your enhancer to be called multiple times for a single compose
- Your composer should not have any dependencies not explicitly listed

## Contributing

We welcome contributions. Whether its passing on an idea, adding code, writing your own set of enhancers, or telling us about a bug you found - together we can make this a better tool. Please see the [CONTRIBUTING.md](https://github.com/truefit/bach/blob/master/CONTRIBUTING.md) for guidelines.

Some Ideas To Get Started:

- Feedback on the process of creating custom enhancers
- Libraries around some popular hook collections like https://github.com/rehooks/ or https://github.com/rehooks/awesome-react-hooks

## Inspiration

In closing, we wanted to share some links that had effects on our thinking when putting this library together.

### Functional Programming

- [Composing Software](https://leanpub.com/composingsoftware)

### Other Libraries

- [Recompose](https://github.com/acdlite/recompose)
- [Rehook](https://github.com/Synvox/rehook)
- [Re-Enhance](https://github.com/cevr/re-enhance)
- [React Compose Hooks](https://github.com/lucasconstantino/react-compose-hooks)
- [react-hooks-composer](https://github.com/nudelx/react-hooks-composer)

### "Alternative" opinions on hook syntax

- https://medium.com/ottofellercom/can-react-hooks-api-replace-recompose-ea5460b7fde3
- https://stateofprogress.blog/the-biggest-lies-about-react-hooks-29aa306e354f
- https://medium.com/ackee/what-i-dont-like-about-react-hooks-e6ec7da863d5
- https://dev.to/revskill10/why-i-wont-use-react-hooks-i38
- https://www.reddit.com/r/reactjs/comments/9suobg/why_the_hate_for_react_hooks/
